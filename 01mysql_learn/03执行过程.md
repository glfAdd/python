[参考 1](https://blog.csdn.net/wanghailan1818/article/details/121472158)







```
undo log



redo log






连接器





```

##### 连接器

```
1. 负责与客户端的通信,是半双工模式,这就意味着某一固定时刻只能由客户端向服务器请求或者服务器向客户端发送数据,而不能同时进行,其中mysql在与客户端连接TCP/IP的
2. 验证请求用户的账户和密码是否正确,如果账户和密码错误,会报错:Access denied for user ‘root’@‘localhost’ (using password: YES)
3. 如果用户的账户和密码验证通过,会在mysql自带的权限表中查询当前用户的权限:

mysql中存在4个控制权限的表，分别为**user表，db表，tables_priv表，columns_priv表**,mysql权限表的验证过程为：

1:**User表**:存放用户账户信息以及全局级别（所有数据库）权限，决定了来自哪些主机的哪些用户可以访问数据库实例
**Db表:**存放数据库级别的权限，决定了来自哪些主机的哪些用户可以访问此数据库
Tables_priv表：存放表级别的权限，决定了来自哪些主机的哪些用户可以访问数据库的这个表
Columns_priv表：存放列级别的权限，决定了来自哪些主机的哪些用户可以访问数据库表的这个字段
Procs_priv表：存放存储过程和函数级别的权限

2:先从user表中的Host,User,Password这3个字段中判断连接的ip、用户名、密码是否存在，存在则通过验证。

3:通过身份认证后，进行权限分配，按照user，db，tables_priv，columns_priv的顺序进行验证。即先检查全局权限表user，如果user中对应的权限为Y，则此用户对所有数据库的权限都为Y，将不再检查db, tables_priv,columns_priv；如果为N，则到db表中检查此用户对应的具体数据库，并得到db中为Y的权限；如果db中为N，则检查tables_priv中此数据库对应的具体表，取得表中的权限Y，以此类推

4:如果在任何一个过程中权限验证不通过,都会报错



这一步主要是管理连接和权限验证。

负责管理客户端的连接，比如mysql -u root -p，就是客户端与连接器之间完成的，连接分为长连接和短连接，建议使用长连接，因为建立连接是相对复杂的一个过程。但是长连接也有优化的空间，即长连接过多，随着执行大的查询操作，会占用较多的内存。

建立连接完成之后，连接器会判断该用户的权限，之后用户的操作都会基于权限来判定是否允许。


```

